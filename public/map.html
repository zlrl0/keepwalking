<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Kakao Map</title>
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f420d9389b496ecc57457c07ca32db47&libraries=services"></script>
  </head>
  <body>
    <div id="map" style="width:100%; height:100vh;"></div>

    <script>
      const params = new URLSearchParams(location.search);
      const from = params.get("from") || "서울";
      const to = params.get("to") || "부산";

      const map = new kakao.maps.Map(document.getElementById("map"), {
        center: new kakao.maps.LatLng(37.5665, 126.978),
        level: 5,
      });

      const geocoder = new kakao.maps.services.Geocoder();

      geocoder.addressSearch(from, function (fromResult, status1) {
        if (status1 === kakao.maps.services.Status.OK) {
          geocoder.addressSearch(to, function (toResult, status2) {
            if (status2 === kakao.maps.services.Status.OK) {
              const start = new kakao.maps.LatLng(fromResult[0].y, fromResult[0].x);
              const end = new kakao.maps.LatLng(toResult[0].y, toResult[0].x);

              new kakao.maps.Marker({ map, position: start });
              new kakao.maps.Marker({ map, position: end });

              new kakao.maps.Polyline({
                map,
                path: [start, end],
                strokeWeight: 5,
                strokeColor: '#FF6B81',
                strokeOpacity: 0.9,
                strokeStyle: 'solid',
              });

              map.setCenter(start);
            }
          });
        }
      });
    </script>
  </body>
</html>
